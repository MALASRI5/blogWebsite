<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head.ejs') %>

  <body>
    <%- include('../partials/nav.ejs') %>
      <div class="content detailView">
        <div>
          <h2>
            <%= blog.title %>
          </h2>
          <p>
            <%= blog.body %>
          </p>
        </div>
        <div>
          <a class="delete" data-doc="<%= blog._id %>">
            <img src="/delete.png" alt="delete icon" width="30" height="30">
          </a>
        </div>

      </div>

      <script>
        const delete_ = document.querySelector('a.delete');
        delete_.addEventListener('click', (e) => {
          const delete_API = `/blogs/${delete_.dataset.doc}`
          fetch(delete_API, {
            method: 'DELETE'
          })
            .then((response) => response.json())
            .then((data) => window.location.href = data.redirect)
            .catch((err) => console.log(err))
        })
      </script>
      <%- include('../partials/footer.ejs') %>
  </body>

</html>